export const state={wallet:null,activeTab:"squad",loading:!1,socialSort:"new",selectedAvatar:null,modalOpen:!1};export const STATE_EVENTS={WALLET_CHANGED:"wallet_changed",TAB_CHANGED:"tab_changed",LOADING_CHANGED:"loading_changed",SOCIAL_SORT_CHANGED:"social_sort_changed",AVATAR_SELECTED:"avatar_selected",MODAL_STATE_CHANGED:"modal_state_changed"};const eventListeners={};export function subscribe(e,t){return eventListeners[e]||(eventListeners[e]=[]),eventListeners[e].push(t),()=>{eventListeners[e]=eventListeners[e].filter((e=>e!==t))}}function emit(e,t){eventListeners[e]&&eventListeners[e].forEach((e=>e(t)))}export function setWallet(e){state.wallet=e,emit(STATE_EVENTS.WALLET_CHANGED,e),e?.publicKey?localStorage.setItem("lastWalletAddress",e.publicKey):localStorage.removeItem("lastWalletAddress")}export function setActiveTab(e){state.activeTab=e,emit(STATE_EVENTS.TAB_CHANGED,e)}export function setLoading(e){state.loading=e,emit(STATE_EVENTS.LOADING_CHANGED,e)}export function setSocialSort(e){state.socialSort=e,emit(STATE_EVENTS.SOCIAL_SORT_CHANGED,e)}export function setSelectedAvatar(e){state.selectedAvatar=e,emit(STATE_EVENTS.AVATAR_SELECTED,e)}export function setModalOpen(e){state.modalOpen=e,emit(STATE_EVENTS.MODAL_STATE_CHANGED,e)}export function initializeStateFromStorage(){const e=localStorage.getItem("lastWalletAddress");e&&(state.wallet={publicKey:e});const t=localStorage.getItem("lastActiveTab");t&&(state.activeTab=t)}window.state=state;
import{initializeStateFromStorage,state,setActiveTab}from"./core/state.js";import{initializeWallet}from"./services/wallet.js";import{initializeTabs}from"./components/tabs.js";import{initializeContentLoader}from"./core/contentLoader.js";import{showToast}from"./utils/toast.js";function initializeApplication(){console.log("Initializing CosyWorld application..."),initializeStateFromStorage(),initializeWallet(),initializeTabs(),initializeContentLoader(),setupMobileNavigation(),setupModalEventListeners(),showToast("Welcome to CosyWorld!"),registerGlobalFunctions(),window.state=state,window.loadContent&&window.loadContent()}function setupMobileNavigation(){const t=document.getElementById("open-mobile-nav");t&&t.addEventListener("click",(()=>{const t=document.querySelector("nav");t&&t.classList.remove("hidden")}));const e=document.getElementById("close-mobile-nav");e&&e.addEventListener("click",(()=>{const t=document.querySelector("nav");t&&t.classList.add("hidden")}))}function setupModalEventListeners(){const t=document.getElementById("modal-container");t&&t.addEventListener("click",(e=>{e.target===t&&closeModal()}));const e=document.getElementById("avatar-modal");e&&e.addEventListener("click",(t=>{t.target===e&&closeAvatarModal()}))}function registerGlobalFunctions(){window.setActiveTab=setActiveTab,window.setSocialSort=t=>{state.socialSort=t,window.loadContent&&window.loadContent()},window.closeModal=()=>{const t=document.getElementById("modal-container");t&&t.classList.add("hidden")},window.closeAvatarModal=()=>{const t=document.getElementById("avatar-modal");t&&t.classList.add("hidden")},window.showAvatarDetails=async t=>{try{const{showAvatarDetailsModal:e}=await import("./components/avatar.js");e(t)}catch(t){console.error("Error loading avatar details:",t),showToast(`Error loading avatar details: ${t.message}`,{type:"error"})}},window.showTribeDetails=async t=>{try{const{showTribeDetailsContent:e}=await import("./tabs/tribes.js");e(t)}catch(t){console.error("Error loading tribe details:",t),showToast(`Error loading tribe details: ${t.message}`,{type:"error"})}}}document.addEventListener("DOMContentLoaded",initializeApplication);
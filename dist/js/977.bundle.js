(self.webpackChunkmoonstone_sanctum=self.webpackChunkmoonstone_sanctum||[]).push([[977],{903:(t,n,e)=>{e.d(n,{D2:()=>r,MD:()=>s,YJ:()=>i,c3:()=>g,cy:()=>d,h5:()=>l,im:()=>c});var o=e(409);async function a(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const e=await fetch(t,n);if(!e.ok){const t=await e.json().catch((()=>null)),n=t?.message||`HTTP error: ${e.status}`;throw new Error(n)}return e.json()}catch(n){throw console.error(`API Error (${t}):`,n),n}}e(522);const s={getAvatars:async function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return a(`${o.Hr.AVATARS}?${t}`)},getAvatarById:t=>a(`${o.Hr.AVATARS}/${t}`),getNarratives:t=>a(`${o.Hr.AVATARS}/${t}/narratives`),getActions:t=>a(`${o.Hr.AVATARS}/${t}/dungeon-actions`),getStats:t=>a(`${o.Hr.AVATARS}/${t}/stats`)},r={getStatus:t=>a(`${o.Hr.XAUTH}/status/${t}`),initiateAuth:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(`${o.Hr.XAUTH}/initiate/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})},disconnect:t=>a(`${o.Hr.XAUTH}/disconnect/${t}`,{method:"POST"})},i={getStatus:t=>a(`${o.Hr.CLAIMS}/status/${t}`),claimAvatar:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(`${o.Hr.CLAIMS}/claim/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}},c={getCounts:()=>a(`${o.Hr.TRIBES}/counts`),getTribeByEmoji:t=>a(`${o.Hr.TRIBES}/${t}`)},l={getActionLog:function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return a(`${o.Hr.DUNGEON}/log?${t}`)}},d={getPosts:function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return a(`${o.Hr.SOCIAL}/posts?${t}`)}},g={getLeaderboard:function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return a(`${o.Hr.LEADERBOARD}?${t}`)}}},977:(t,n,e)=>{e.r(n),e.d(n,{loadContent:()=>r});var o=e(903),a=e(318),s=e(350);async function r(){const t=document.getElementById("content");if(t)try{const r=await o.cy.getPosts({sort:a.wk.socialSort});if(!r||!r.posts||0===r.posts.length)return void(t.innerHTML='\n    <div class="max-w-4xl mx-auto px-4">\n      <div class="text-center py-12">\n        <h2 class="text-2xl font-bold mb-4">No Social Posts Found</h2>\n        <p class="text-gray-400 mb-6">\n          There are no social posts to display at this time.\n        </p>\n      </div>\n    </div>\n  ');n=t,e=r.posts,console.log(e),n.innerHTML=`\n    <div class="max-w-6xl mx-auto px-4">\n      <div class="flex flex-col md:flex-row justify-between items-center mb-6">\n        <h2 class="text-4xl font-bold text-white">Social Feed</h2>\n        <div>\n          <button \n            onclick="setSocialSort('new')" \n            class="${"new"===a.wk.socialSort?"bg-blue-600":"bg-gray-700"} px-4 py-2 rounded"\n          >\n            Latest\n          </button>\n          <button \n            onclick="setSocialSort('top')" \n            class="${"top"===a.wk.socialSort?"bg-blue-600":"bg-gray-700"} px-4 py-2 rounded"\n          >\n            Top\n          </button>\n        </div>\n      </div>\n      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">\n        ${e.map((t=>`\n          <div class="bg-gray-800 rounded-lg p-6">\n            <div class="flex items-center gap-3 mb-3">\n              <img \n                src="${t.avatar.thumbnailUrl||t.avatar.imageUrl}" \n                class="w-12 h-12 rounded-full" \n                alt="${t.avatar.name}"\n                onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'100\\' height=\\'100\\' viewBox=\\'0 0 100 100\\'%3E%3Crect fill=\\'%23333\\' width=\\'100\\' height=\\'100\\'/%3E%3Ctext fill=\\'%23FFF\\' x=\\'50\\' y=\\'50\\' font-size=\\'50\\' text-anchor=\\'middle\\' dominant-baseline=\\'middle\\'%3E${t.avatar.name.charAt(0).toUpperCase()}%3C/text%3E%3C/svg%3E';"\n              >\n              <div>\n                <div class="font-bold text-xl text-white">${t.avatar.name}</div>\n                <div class="text-sm text-gray-400">${(0,s.Yq)(t.timestamp)}</div>\n              </div>\n            </div>\n            <p class="mb-4 text-lg text-gray-100">${t.content}</p>\n            <div class="flex justify-end">\n              <button \n                onclick="showAvatarDetails('${t.avatar._id}')" \n                class="text-blue-400 hover:text-blue-300 text-sm"\n              >\n                View Avatar\n              </button>\n            </div>\n          </div>\n        `)).join("")}\n      </div>\n    </div>\n  `}catch(n){console.error("Load Social Content error:",n),t.innerHTML=`\n      <div class="text-center py-12 text-red-500">\n        Failed to load social content: ${n.message}\n        <button class="mt-4 px-4 py-2 bg-primary-600 rounded" onclick="loadContent()">\n          Retry\n        </button>\n      </div>\n    `}var n,e}}}]);
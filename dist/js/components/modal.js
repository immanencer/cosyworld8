import{UI_CONFIG}from"../core/config.js";import{setModalOpen}from"../core/state.js";export function showModal({id:e="modal-container",title:t="",content:n="",onClose:o=null,showClose:l=!0,size:s="md"}){const a=document.getElementById(e);if(!a)return;const d=document.getElementById(`${e}-content`)||a.querySelector(".modal-content");if(!d)return;const c=getModalSizeClass(s);let i="";(t||l)&&(i+=`\n      <div class="flex justify-between items-center p-4 border-b border-gray-700">\n        ${t?`<h3 class="text-xl font-bold">${t}</h3>`:"<div></div>"}\n        ${l?'\n          <button class="modal-close text-gray-400 hover:text-white" aria-label="Close">\n            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />\n            </svg>\n          </button>\n        ':""}\n      </div>\n    `),i+=`<div class="p-4">${n}</div>`,d.className=`bg-gray-800 rounded-xl shadow-2xl ${c} overflow-y-auto`,d.innerHTML=i;const r=d.querySelector(".modal-close");r&&r.addEventListener("click",(()=>closeModal(e,o))),a.addEventListener("click",(t=>{t.target===a&&closeModal(e,o)})),a.classList.remove("hidden"),a.classList.add("flex"),setModalOpen(!0),d.classList.add("modal-enter"),setTimeout((()=>{d.classList.remove("modal-enter"),d.classList.add("modal-enter-active")}),10)}export function closeModal(e="modal-container",t=null){const n=document.getElementById(e);if(!n)return;const o=document.getElementById(`${e}-content`)||n.querySelector(".modal-content");o&&(o.classList.add("modal-exit"),setTimeout((()=>{o.classList.remove("modal-exit"),o.classList.add("modal-exit-active"),setTimeout((()=>{n.classList.add("hidden"),n.classList.remove("flex"),o.classList.remove("modal-exit-active"),setModalOpen(!1),"function"==typeof t&&t()}),UI_CONFIG.MODAL_ANIMATION_DURATION)}),10))}export function confirm({title:e="Confirm",message:t="Are you sure?",confirmText:n="Confirm",cancelText:o="Cancel",confirmClass:l="bg-blue-600 hover:bg-blue-700",onConfirm:s=null,onCancel:a=null}){showModal({title:e,content:`\n    <div class="py-4">\n      <p class="text-gray-300">${t}</p>\n      <div class="flex justify-end gap-2 mt-6">\n        <button id="modal-cancel" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded">\n          ${o}\n        </button>\n        <button id="modal-confirm" class="px-4 py-2 ${l} text-white rounded">\n          ${n}\n        </button>\n      </div>\n    </div>\n  `,onClose:a,size:"sm"});const d=document.getElementById("modal-confirm"),c=document.getElementById("modal-cancel");d&&d.addEventListener("click",(()=>{closeModal(),"function"==typeof s&&s()})),c&&c.addEventListener("click",(()=>{closeModal(),"function"==typeof a&&a()}))}function getModalSizeClass(e){switch(e){case"sm":return"max-w-lg w-full max-h-[80vh]";case"md":default:return"max-w-2xl w-full max-h-[85vh]";case"lg":return"max-w-4xl w-full max-h-[90vh]";case"xl":return"max-w-6xl w-full max-h-[90vh]"}}